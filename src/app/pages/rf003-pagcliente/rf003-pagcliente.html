
<!--
PÁGINA INICIAL DO CLIENTE
Nesta página, todas as solicitações criadas criadas pelo cliente são listadas
-->
<section class="vh-100 solicitacoesFundo">
  <div class="container py-2 h-100">
    <div class="row justify-content-center h-100 mt-4">
      <div class="col-12">
        <div class="card shadow-2-strong card-registration">
          <div class="card-body p-4 p-md-5">
            <div class="listaSolicitacoes">
              <!-- Título Suas solicitações -->
              <h2 class="card-title fw-bold mt-3 mb-5 mx-1 mx-md-4 text-center">Suas solicitações</h2>

              <!-- DEBUG, BOTÃO GETLOGIN, REMOVER QUANDO NÃO MAIS UTILIZADO -->


              <!-- Início tabela de solicitações -->
               <table class="table table-striped table-bordered table-hover text-center align-middle ">
                  <tbody>
                    <!-- Colunas -->
                    <tr>
                      <th scope="col">Nº</th>
                      <th scope="col">Horário</th>
                      <th scope="col">Descrição</th>
                      <th scope="col">Categoria</th>
                      <th scope="col">Estado</th>
                      <th scope="col">Defeito</th>
                      <!-- Botão de criar nova solicitação -->
                      <th class="text-center">
                          <a href="solicitacao" title="Novo" alt="Novo"
                          class="btn btn-xs btn-success">
                          <i class="fa fa-plus" aria-hidden="true"></i> Novo
                          </a>
                      </th>
                    </tr>

                    <!-- Início listagem de solicitações criadas pelo cliente -->
                    @for (s of solicitacoes; track s; let i = $index)
                    {
                      <tr>
                        <td> {{ i }}</td>
                        <td> {{ s.dataHora | date:'short' }} </td>
                        <td> {{ s.descricaoEquipamento | slice:0:30 }} </td>
                        <td> {{ s.categoriaEquipamento }} </td>
                        <td> {{ s.estado }} </td>
                        <td> {{ s.descricaoDefeito | slice:0:30 }} </td>
                        <!--
                        Botão conforme a ação que o usuário deve efetuar (se não houver ação, não mostrar botão).
                         As ações são as seguintes, conforma o estado:
                            1. ORÇADA: Botão Aprovar/Rejeitar Serviço, que apresenta a tela de Mostrar orçamento (RF005)
                            2. APROVADA: Sem botão de ação    
                            3. REJEITADA: Botão Resgatar Serviço (RF009)    
                            4. ARRUMADA: Botão Pagar Serviço (RF010)    
                            5. Outros estados: Botão Visualizar Serviço
                        -->
                          @switch (s.estado)
                          {
                            @case('ORCADA')
                            {
                        <td>
                          <a href="visualizar-servico/{{s.ID}}" title="AprovarRejeitar" alt="AprovarRejeitar"
                          class="btn btn-xs btn-info">
                          <i class="fa-solid fa-magnifying-glass aria-hidden=true"></i> Conferir
                          </a>
                        </td>
                            }
                            @case('REJEITADA')
                            {
                        <td>
                          <a href="visualizar-servico/{{s.ID}}" title="Resgatar" alt="Resgatar"
                          class="btn btn-xs btn-info">
                          <i class="fa-solid fa-redo aria-hidden=true"></i> Resgatar
                          </a>
                        </td>
                            }
                            @case('ARRUMADA')
                            {
                        <td>
                          <a href="visualizar-servico/{{s.ID}}" title="Visualizar" alt="Visualizar"
                          class="btn btn-xs btn-info">
                          <i class="fa-solid fa-money aria-hidden=true"></i> Pagar
                          </a>
                        </td>
                            }
                            @default {
                        <td></td>
                            }
                          }
                      </tr>
                    }

                  </tbody>
                </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>